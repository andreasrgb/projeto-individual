<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>FutAnalytics</title>


    <script src="./js/funcoes.js"></script>


    <link rel="icon" href="../assets/imgs/favicon-32x32.png">
    <link rel="stylesheet" href="dashboards.css">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link
        href="https://fonts.googleapis.com/css2?family=Exo+2:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
        rel="stylesheet">

        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

</head>

<body onload="grafico_jogador(), grafico_clube()">

    <div class="janela">


        <div class="header-left dash-header">

            <h1>FutAnalytics</h1>

            <div class="hello">
                <h3>Olá, <span id="b_usuario">usuário</span>!</h3>
            </div>

            <div class="btn-logout" onclick="limparSessao()">
                <h3>Sair</h3>
            </div>

        </div>
    </div>

    <div id="graficoJogador" class="grafico_jogador">
        <canvas id="myChart">

        </canvas>
    </div>

    <div id="graficoClube" class="grafico_clube">
        <canvas id="myChart2">

        </canvas>
    </div>


</body>

<script>

// variáveis dos jogadores

var lista_nome_jogador = [];
var lista_voto_jogador = [];

var nome = "";
var nome2 = "";
var nome3 = "";
var nome4 = "";
var nome5 = "";
var nome6 = "";
var nome7 = "";
var nome8 = "";
var nome9 = "";
var nome10 = "";
var voto = 0;
var voto2 = 0;
var voto3 = 0;
var voto4 = 0;
var voto5 = 0;
var voto6 = 0;
var voto7 = 0;
var voto8 = 0;
var voto9 = 0;
var voto10 = 0;

// variáveis dos clubes
var lista_nome_clube = [];
var lista_voto_clube = [];

var nome_clube = "";
var nome_clube2 = "";
var nome_clube3 = "";
var nome_clube4 = "";
var nome_clube5 = "";
var nome_clube6 = "";
var nome_clube7 = "";
var nome_clube8 = "";
var nome_clube9 = "";
var nome_clube10 = "";
var voto_clube = 0;
var voto_clube2 = 0;
var voto_clube3 = 0;
var voto_clube4 = 0;
var voto_clube5 = 0;
var voto_clube6 = 0;
var voto_clube7 = 0;
var voto_clube8 = 0;
var voto_clube9 = 0;
var voto_clube10 = 0;

const labels = [
      'Neymar JR',
      'Kylian Mbappe',
      'Lionel Messi',
      'Cristiano Ronaldo',
      'Vini JR',
      'Karim Benzema',
      'Robert Lewandowski',
      'Mohamed Salah',
      'Sadio Mané',
      'Erling Haaland'
    ];
  
    const data1 = {
      labels: labels,
      datasets: [{
        label: 'Jogadores',
        backgroundColor: 'rgb(255, 99, 132)',
        borderColor: 'rgb(255, 99, 132)',
        data: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
      }]
    };
  
    const config = {
      type: 'bar',
      data: data1,
      options: {}
    };

    const myChart = new Chart(
      document.getElementById('myChart'),
      config
    );

function grafico_jogador() {
        fetch("/usuarios/grafico_jogador").then(function (res1) {
            if (res1.ok) {
                console.log(res1)
                res1.json().then(function (res1) {
                    console.log("Dados recebidos: ", JSON.stringify(res1)) 
                    nome = res1[0].nome
                    nome2 = res1[1].nome
                    nome3 = res1[2].nome
                    nome4 = res1[3].nome
                    nome5 = res1[4].nome
                    nome6 = res1[5].nome
                    nome7 = res1[6].nome
                    nome8 = res1[7].nome
                    nome9 = res1[8].nome
                    nome10 = res1[9].nome
                    voto = res1[0].voto
                    voto2 = res1[1].voto
                    voto3 = res1[2].voto
                    voto4 = res1[3].voto
                    voto5 = res1[4].voto
                    voto6 = res1[5].voto
                    voto7 = res1[6].voto
                    voto8 = res1[7].voto
                    voto9 = res1[8].voto
                    voto10 = res1[9].voto

                    data1.datasets[0].data[0] = voto
                    data1.datasets[0].data[1] = voto2
                    data1.datasets[0].data[2] = voto3
                    data1.datasets[0].data[3] = voto4
                    data1.datasets[0].data[4] = voto5
                    data1.datasets[0].data[5] = voto6
                    data1.datasets[0].data[6] = voto7
                    data1.datasets[0].data[7] = voto8
                    data1.datasets[0].data[8] = voto9
                    data1.datasets[0].data[9] = voto10
                }
                );

              

            } else {
                throw ('Houve um erro ao pegar info!');
            }
        }).catch(function (res1) {
            console.error(res1);
        });
    }

    function grafico_clube() {
        fetch("/usuarios/grafico_clube").then(function (res1) {
            if (res1.ok) {
                console.log(res1)
                res1.json().then(function (res1) {
                    console.log("Dados recebidos: ", JSON.stringify(res1)) 
                    nome_clube = res1[0].nome_clube
                    nome_clube2 = res1[1].nome_clube
                    nome_clube3 = res1[2].nome_clube
                    nome_clube4 = res1[3].nome_clube
                    nome_clube5 = res1[4].nome_clube
                    nome_clube6 = res1[5].nome_clube
                    nome_clube7 = res1[6].nome_clube
                    nome_clube8 = res1[7].nome_clube
                    nome_clube9 = res1[8].nome_clube
                    nome_clube10 = res1[9].nome_clube
                    voto_clube = res1[0].voto_clube
                    voto2_clube = res1[1].voto_clube
                    voto3_clube = res1[2].voto_clube
                    voto4_clube = res1[3].voto_clube
                    voto5_clube = res1[4].voto_clube
                    voto6_clube = res1[5].voto_clube
                    voto7_clube = res1[6].voto_clube
                    voto8_clube = res1[7].voto_clube
                    voto9_clube = res1[8].voto_clube
                    voto10_clube = res1[9].voto_clube
                }
                );
            } else {
                throw ('Houve um erro ao pegar info!');
            }
        }).catch(function (res1) {
            console.error(res1);
        });
    }



</script>

</html>